<html>
 <head>
 </head>
 <body>
  <script src="https://www.puck-js.com/puck.js"></script>
  <script>
   let controllerIndex = null;

let pressedUp = false;
let pressedDown = false;
let pressedLeft = false;
let pressedRight = false;
let pressedUp2 = false;
let pressedDown2 = false;
let pressedLeft2 = false;
let pressedRight2 = false;

window.addEventListener('gamepadconnected', (event) => {
  controllerIndex = event.gamepad.index;
  document.body.innerHTML = 'controller connected';
});

window.addEventListener('gamepaddisconnected', (event) => {
  controllerIndex = null;
  document.body.innerHTML = 'controller disconnected';
});

function controllerInput(){
  if (controllerIndex !== null) {
    const gamepad = navigator.getGamepads()[controllerIndex];
    const stickDeadZone = .4;
    const leftRightValue = gamepad.axes[0];
    if (leftRightValue >= stickDeadZone) {
      rightPressed = true;
      document.body.innerHTML = 'Joystick pressed right.'
    } else if (leftRightValue <= -stickDeadZone) {
      leftPressed = true;
      document.body.innerHTML = 'Joystick pressed left.'
    };
    
    const upDownValue = gamepad.axes[1];

    if (upDownValue >= stickDeadZone) {
      downPressed = true;
      document.body.innerHTML = 'Stick pressed down.';
    } else if (upDownValue <= -stickDeadZone) {
      upPressed = true;
      document.body.innerHTML = 'Stick pressed up.'
    }
   const leftRightValue2 = gamepad.axes[4];
    if (leftRightValue2 >= stickDeadZone) {
      rightPressed2 = true;
      document.body.innerHTML = 'Joystick pressed right.'
    } else if (leftRightValue2 <= -stickDeadZone) {
      leftPressed2 = true;
      document.body.innerHTML = 'Right Joystick pressed left.'
    };
    
    const upDownValue2 = gamepad.axes[3];

    if (upDownValue2 >= stickDeadZone) {
      downPressed2 = true;
      document.body.innerHTML = 'Right Stick pressed down.';
    } else if (upDownValue2 <= -stickDeadZone) {
      upPressed2 = true;
      document.body.innerHTML = 'Right Stick pressed up.'
    }
  };
};
function inputLoop(){
  controllerInput();
 requestAnimationFrame(inputLoop);
};

inputLoop();
  </script>
 </body>
</html>
